
<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<title>在线磁力转换</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<script src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
	<script src="https://cdn.staticfile.org/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script>
	<script src="jquery.uploadify.min.js" type="text/javascript" type="text/javascript"></script>
	<link href="https://cdn.staticfile.org/bootswatch/4.3.1/yeti/bootstrap.min.css" rel="stylesheet" media="screen" />
	<link href="uploadify.css" rel="stylesheet" type="text/css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-XQNX4L097X"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-XQNX4L097X');
	</script>
</head>
<body>
	<div class="clearfix" style="margin-bottom:70px"></div>
	<div class="container">
		<div class="card mb-3">
			<h4 class="card-header">种子转磁力</h4>
			<div class="card-body" id="torrent2magnet">
				<form>
					<div id="queue"></div>
					<input id="file_upload" name="file_upload" type="file" multiple="false" />
				</form>
				<div class="info"></div>
			</div>
		</div>

		<div class="card mb-3">
			<h4 class="card-header">磁力转种子</h4>
			<div class="card-body" id="magnet2torrent">
				<form class="input-group custom-input-group">
					<input type="text" id="magnet" name="magnet" class="form-control" placeholder="magnet:?xt=urn:btih:" /> 
					<span class="input-group-btn"><input type="button" class="btn btn-primary" id="submit" name="submit" value="转换" /></span>
				</form>
				<div class="info"></div>
			</div>
		</div>
	</div>

	</footer><script type="text/javascript">
$(function() {
	$('#file_upload').uploadify({
		'formData'  : {
		'timestamp' : '1633101610',
		'token'     : 'dd0eea286e73e99b4e02f21d9edf756d'
		},
		'multi'    : false,
		'swf'      : 'uploadify/uploadify.swf',
		'uploader' : 'torrent2magnet.php',
		'onUploadSuccess' : function(file, data, response) {
			var result = $('#torrent2magnet .info');
			var strhtml = 'The file ' + file.name + ' is vailed! ';
			if (response)
			{
				var obj = eval ("(" + data + ")");
				if (obj.result)
				{
					strhtml = '<a href="' + obj.url + '" class="alert-link" target="_blank">' + obj.url + '</br>';
				}
			}
			result.html('<div class="alert alert-success mb-0">' + strhtml + '</div>');
		}
	});
});

$(document).ready(function(){
	$("#submit").click(function(){
		var magneturl = $("#magnet")[0].value;
		$.get("magnet2torrent.php", { magnet: encodeURIComponent(magneturl) },function(data){
			var result = $('#magnet2torrent .info');
			var obj = eval ("(" + data + ")");
			var strhtml = 'The url ' + magneturl + ' is vailed! ';
			if (obj.result) {
				strhtml = '<a href="' + obj.url + '" class="alert-link" target="_blank">' + obj.url + '</br>';
			}
			result.html('<br /><div class="alert alert-info mb-0">' + strhtml + '</div>');
		});// get  
	});// click
});// ready
</script>
</body>
</html>